<html>
	<head>
		<style>
			body { font-family: sans, sans-serif; background-color: white; }
			div{
				margin:10px;
			}
		</style>
		<script type="text/python">
from threading import Thread
import time
# Create thread to eat cpu
def mythread():
  a = 1
  while True:
    a = a + 1
    print "in thread loop %s" % a
Thread(target=mythread).start()
</script>
		<script>
			var menu = null;
			var item1 = null;
			var menu2 = null;
			var item2 = null;
			var check_item = null;
			function addTrayThing() {
				var trayIcon = Titanium.UI.addTray("app://fonts.ico");
				if (menu != null)
				{
					trayIcon.setMenu(menu);
				}
			}
			function setMainMenu() {
				try {
				menu = Titanium.UI.createMenu();
				var itemz = menu.addItem("WithImage", function() {alert('what');}, "app://fonts.ico");
				var iz = itemz.addItem("blah1");
				iz.disable();
				itemz.addItem("blah20");
				itemz.addItem("blah30");
				item1 = menu.addItem("Blahblah");
				item1.addItem("haha1");
				item1.addItem("PNG Icon", function() {alert('what');}, "app://icon.png");
				item1.addItem("BMP Icon", function() {alert('what');}, "app://icon.bmp");
				item1.addItem("ICO Icon", function() {alert('what');}, "app://setup.ico");
				check_item = item1.addCheckItem("haha4");
				check_item.setState(true);

				item1.addSeparatorItem();
				item1.addItem("The items below should flip-flop");
				var ci2 = item1.addCheckItem("Not autocheck1");
				ci2.setAutoCheck(false);
				ci2.setState(true);

				var ci3 = item1.addCheckItem("Not autocheck2");
				ci3.setAutoCheck(false);

				var flopper = function() {
					Titanium.API.debug("Flopping");
					ci2.setState(!ci2.getState());
					ci3.setState(!ci3.getState());
				}
				ci2.addEventListener(flopper);
				ci3.addEventListener(flopper);
				item1.addSeparatorItem();

				var ci4 = item1.addCheckItem("haha4_disabled");
				ci4.setState(true);
				ci4.disable();

				Titanium.UI.setMenu(menu);
				Titanium.UI.setContextMenu(menu);
				Titanium.UI.setDockMenu(menu);
				} catch (e) {
					alert(e);
				}
			}
			function setMainMenu2() {
				try {
				menu2 = Titanium.UI.createMenu();
				item2 = menu2.addItem("Menu2");
				item2.addItem("haha1");
				item2.addItem("haha2");
				item2.addItem("haha3");
				Titanium.UI.setMenu(menu2);
				Titanium.UI.setContextMenu(menu2);
				Titanium.UI.setDockMenu(menu2);
				} catch (e) {
					alert(e);
				}
			}
			function modifySubmenu() {
				item1.addItem("BBB");
				check_item.setState(false);
			}
			function modifyMainMenu() {
				menu.addItem("AAA");
			}
		</script>
	</head>
	<body>
		<h2>Titanium New Menu Tests</h2>
			<div>
				<button onclick="addTrayThing()">Add Tray Thing</button>
				<button onclick="setMainMenu()">Setup Main Menu1</button>
				<button onclick="setMainMenu2()">Setup Main Menu2</button>
				<button onclick="modifySubmenu()">Modify SubMenu</button>
				<button onclick="modifyMainMenu()">Modify Main Menu</button>
				<br/>
				<button onclick="Titanium.UI.setIcon('app://icon.png');">set png icon</button>
				<button onclick="Titanium.UI.setIcon('app://icon.bmp');">set bmp icon</button>
				<button onclick="Titanium.UI.setIcon('app://setup.ico');">set ico icon</button>

				<!--
				<button onclick="playSound()">Play</button>
				<button onclick="pauseSound()">Pause</button>
				<button onclick="stopSound()">Stop</button>
				<button onclick="reloadSound()">Reload</button>
				<button onclick="setVolume()">SetVolume</button>
				<button onclick="getVolume()">GetVolume</button>
				<button onclick="toggleLooping()">ToggleLooping</button>
				<button onclick="isLooping()">IsLooping</button>
				<button onclick="isPlaying()">IsPlaying</button>
				<button onclick="isPaused()">IsPaused</button>
				-->
			</div>
			<form method="post" enctype="multipart/form-data" action="myser.com?format=js">
			<input type="file">
			</form>
	</body>
</html>
